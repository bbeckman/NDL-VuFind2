<? //Don't add START and END comments ?>
<?
  $formatFn = function ($field) {
    return '<a href="' . $this->escapeHtmlAttr($field) . '" title="' . $this->escapeHtmlAttr($field) . '" target="_blank">'
      . $this->escapeHtml(!empty($this->truncateUrl) ? $this->truncateUrl($field) : $field)
      . '</a>';
  };
?>
<?if (!empty($data)): ?>
    <? if (is_array($data)): ?>
      <div class="truncate-field" data-rows="5">
        <? foreach ($data as $field): ?>
          <?= $formatFn($data) ?><br/>
        <? endforeach; ?>
      </div>
    <? else: ?>
      <?= $formatFn($data) ?><br/>
    <? endif; ?>
<? endif; ?>
