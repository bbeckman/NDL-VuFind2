<!-- START of: finna - RecordDriver/SolrDefault/result-condensed-database.phtml -->
<? $subjects = $this->driver->getAllSubjectHeadings(); ?>
<div class="result-database">
  <div>
    <input type="hidden" value="<?=$this->escapeHtmlAttr($this->driver->getUniqueID())?>" class="hiddenId" />
    <input type="hidden" value="<?=$this->escapeHtmlAttr($this->driver->getSourceIdentifier())?>" class="hiddenSource" />
    <div class="description">
    <? $summ = $this->driver->getSummary(); if (!empty($summ)): ?>
      <h5><?=$this->transEsc('Summary')?>:</h5>
        <p class="summary">
          <? foreach ($summ as $field): ?>
          <?=$this->escapeHtmlAttr($field); ?>
          <? endforeach; ?>
        </p>
    <? endif; ?>
    <? if ($this->userlist()->getMode() !== 'disabled'): ?>
      <? /* Saved lists */ ?>
      <div class="savedLists">
        <strong><?=$this->transEsc("Saved in")?>:</strong>
      </div>
    <? endif; ?>
    </div>
  </div>

  <? if (!empty($subjects)): ?>
  <div class="database-subject">
    <h5><?=$this->transEsc('Subjects')?>: </h5>
      <? foreach ($subjects as $field): ?>
      <div class="subjectLine" property="keywords">
        <? $subject = ''; ?>
        <? if(count($field) == 1) $field = explode('--', $field[0]); ?>
          <? $i = 0; foreach ($field as $subfield): ?>
            <?=($i++ == 0) ? '' : ' &#8594; '?>
            <? $subject = trim($subject . ' ' . $subfield); ?>
            <a class="backlink" title="<?=$this->escapeHtmlAttr($subject)?>" href="<?=$this->record($this->driver)->getLink('subject', $subject)?>"><?=trim($this->escapeHtml($subfield))?></a>
          <? endforeach; ?>
      </div>
      <? endforeach; ?>
  </div>
  <? endif; ?>
</div>
<!-- END of: finna - RecordDriver/SolrDefault/result-condensed-database.phtml -->
