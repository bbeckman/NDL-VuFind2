!function(e){var t=function(e){return e.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")};e.fn.editable=function(n,i,a){if(e(["start","finish"]).each(function(e,t){"undefined"==typeof i[t]&&(i[t]=function(){})}),"string"==typeof n)var r=[this],c=n,u="input";else{if("object"!=typeof n)throw'Argument Error - jQuery.editable("click", function(){ ~~ })';var r=n.triggers||[this],c=n.action||"click",u=n.type||"input"}var o=this,s={};return s.start=function(n){e.each(r,function(e,t){t.unbind("clickhold"===c?"mousedown":c),t!==o&&t.hide()});var l=("textarea"===u?o.html().replace(/<br class="newline"( \/)?>/gm,"\n").replace(/&gt;/gm,">").replace(/&lt;/gm,"<"):o.text()).replace(/^\s+/,"").replace(/\s+$/,""),d=e("textarea"===u?"<textarea>":"<input>"),f=o.width();if("undefined"!=typeof a.minWidth&&(f=f<a.minWidth?a.minWidth:f),d.val(l).css("width",f).css("font-size","100%").css("margin",0).attr("id","editable_"+1*new Date).addClass("editable"),"textarea"===u){var h=o.height();h+=a.addToHeight,d.css("height",h)}var m=function(n){var a=n?l:d.val().replace(/^\s+/,"").replace(/\s+$/,""),c=t(a);"textarea"===u&&(c=c.replace(/[\r\n]/gm,'<br class="newline"/>')),o.html(c),i.finish({value:a,target:o,old_value:l,cancel:n}),s.register(),e.each(r,function(e,t){t!==o&&t.show()})};d.keydown(function(e){27===e.keyCode?m(!0):"input"===u&&13===e.keyCode&&m(!1)}),o.html(d),d.focus(),d.blur(function(){m(!1)}),i.start({value:"a",target:o})},s.register=function(){if("clickhold"===c){var t=null;e.each(r,function(e,n){n.unbind("mousedown").bind("mousedown",function(e){t=setTimeout(function(){s.start(e)},500)}),n.unbind("mouseup mouseout").bind("mouseup mouseout",function(e){clearTimeout(t)})})}else e.each(r,function(e,t){t.unbind(c).bind(c,s.start)})},s.register(),this}}(jQuery);